<!DOCTYPE html>
<html>
	<head>
        <meta charset="utf-8" />
		<title>index</title>
		<style>
body {
	background-color: #222;
	color: #fff;
}
#controls {
	background-color: #444;
	padding: 20px;
	margin: 20px;
	float: left;
}
#controls * {
	float: left;
}
#controls span {
	margin-left: 20px;
}
#beat {
	width: 20px;
	height: 20px;
	background-color: #222;
	transition: background-color 0.1s ease;
}
		</style>
	</head>
	<body>
		<div id="controls">
			<input type="file" id="uploadedFile"></input>
			<input type='button' id='startButton' value="Start" onclick='wavebyte.start()'>
			<input type='button' id='stopButton' value="Stop" onclick='wavebyte.stop()'>
			<span>Beat: </span><div id='beat'></div>
		</div>
		<div id="graphics">
			<div id="noWebGL" class="centered" style="width: 500px;">It appears your browser doesn't support WebGL. Sorry!</div>
			<div id="wave"></div>
			<!--<div id="iso"></div>-->
		</div>
		<script type="text/javascript" src="http://threejs.org/build/three.min.js"></script>
		<script type="text/javascript" src="OrbitControls.js"></script>
		<script type="text/javascript" src="wavebyte.js"></script>
		<script type="text/javascript" src="glimpse.js"></script>
		<script type="text/javascript" src="wave_glimpse.js"></script>
		<script type="text/javascript">
var beatDiv = document.getElementById('beat');
var wavebyte = new Wavebyte({
	bpmEnabled: true,
	onBeat: function() {
		setTimeout(function() { beatDiv.style.backgroundColor = '#0066FF'; }, 0);
		setTimeout(function() { beatDiv.style.backgroundColor = '#222'; }, 100);
	},
	delay: 30.0
});

window.onload = function() {
	wavebyte.registerFileInput(document.getElementById('uploadedFile'));
};

// Wave:
var waveDiv = document.getElementById('wave');
var waveView = Wave.createView(waveDiv);
function resize() {
	var padding = 10;
	var w = window.innerWidth - padding;
	var h = window.innerHeight - padding;
	waveView.resize(w, h);
	//waveDiv.style.top = Math.min(w, 500) + "px";
}
window.addEventListener('resize', resize, false);
resize();
		</script>
	</body>
</html>
